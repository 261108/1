<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Generator</title>
</head>
<body>
    <h1>Image Generator</h1>

    <form id="imageForm">
        <label for="imageAddress">Image Address:</label>
        <input type="text" id="imageAddress" required><br><br>

        <label for="imageOpen">Image Open:</label>
        <input type="text" id="imageOpen" required><br><br>

        <label for="name">Name:</label>
        <input type="text" id="name" required><br><br>

        <button type="button" id="generateCode">Generate Code</button>
    </form>

    <textarea id="generatedCode" rows="5" cols="50" readonly></textarea>

    <button type="button" id="copyCode">Copy Code</button>

    <script>
        function extractIframeSrc(iframeCode) {
            const match = iframeCode.match(/src=["'](https?:\/\/[^"']+)["']/);
            return match ? match[1] : '';
        }

        document.getElementById("generateCode").addEventListener("click", function () {
            const imageAddress = document.getElementById("imageAddress").value;
            const iframeCode = document.getElementById("imageOpen").value;
            const name = document.getElementById("name").value;
            
            // Extract the src attribute from the iframe code
            const imageOpen = extractIframeSrc(iframeCode);

            const generatedCode = `<div class="gallery"><a target="_blank" href="${imageOpen}"><img src="${imageAddress}" alt="${name}"></a></div>`;
            document.getElementById("generatedCode").value = generatedCode;
        });

        document.getElementById("copyCode").addEventListener("click", function () {
            const codeToCopy = document.getElementById("generatedCode").value;
            const textarea = document.createElement("textarea");
            textarea.value = codeToCopy;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand("copy");
            document.body.removeChild(textarea);
            alert("Code has been copied to the clipboard.");
        });
    </script>
</body>
</html>
